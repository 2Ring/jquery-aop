(function(){var _after=1;var _before=2;var _around=3;var _intro=4;var _regexEnabled=true;var weaveOne=function(source,method,advice){var old=source[method];if(!(old instanceof Function)){var oldObject=old;old=function(){var code=arguments.length>0?"arguments[0]":"";for(var i=1;i<arguments.length;i++){code+=",arguments["+i+"]"}return eval("oldObject("+code+");")}}var aspect;if(advice.type==_after){aspect=function(){var returnValue=old.apply(this,arguments);return advice.value.apply(this,[returnValue,method])}}else{if(advice.type==_before){aspect=function(){advice.value.apply(this,[arguments,method]);return old.apply(this,arguments)}}else{if(advice.type==_intro){aspect=function(){return advice.value.apply(this,arguments)}}else{if(advice.type==_around){aspect=function(){var invocation={object:this,args:Array.prototype.slice.call(arguments)};return advice.value.apply(invocation.object,[{arguments:invocation.args,method:method,proceed:function(){return old.apply(invocation.object,invocation.args)}}])}}}}}aspect.unweave=function(){source[method]=old;pointcut=source=aspect=old=null};source[method]=aspect;return aspect};var weave=function(pointcut,advice){var source=(typeof(pointcut.target.prototype)!="undefined")?pointcut.target.prototype:pointcut.target;var advices=[];if(advice.type!=_intro&&typeof(source[pointcut.method])=="undefined"){for(var method in source){var item=null;try{item=source[method]}catch(e){}if(item!=null&&item instanceof Function&&method.match(pointcut.method)){advices[advices.length]=weaveOne(source,method,advice)}}}else{advices[0]=weaveOne(source,pointcut.method,advice)}return _regexEnabled?advices:advices[0]};jQuery.aop={after:function(pointcut,advice){return weave(pointcut,{type:_after,value:advice})},before:function(pointcut,advice){return weave(pointcut,{type:_before,value:advice})},around:function(pointcut,advice){return weave(pointcut,{type:_around,value:advice})},introduction:function(pointcut,advice){return weave(pointcut,{type:_intro,value:advice})},setup:function(settings){_regexEnabled=settings.regexMatch}}})();